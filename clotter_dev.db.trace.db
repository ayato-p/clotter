2017-07-18 15:10:55 jdbc[3]: exception
org.h2.jdbc.JdbcSQLException: テーブル "SCHEMA_MIGRATIONS" が見つかりません
Table "SCHEMA_MIGRATIONS" not found; SQL statement:
SELECT 1 FROM schema_migrations [42102-193]
2017-07-18 18:02:58 database: flush
org.h2.message.DbException: 一般エラー: "java.lang.IllegalStateException: The file is locked: nio:/Users/shunsuke.tadokoro/git-project/clotter/clotter_dev.db.mv.db [1.4.193/7]"
General error: "java.lang.IllegalStateException: The file is locked: nio:/Users/shunsuke.tadokoro/git-project/clotter/clotter_dev.db.mv.db [1.4.193/7]" [50000-193]
	at org.h2.message.DbException.get(DbException.java:168)
	at org.h2.message.DbException.convert(DbException.java:295)
	at org.h2.mvstore.db.MVTableEngine$1.uncaughtException(MVTableEngine.java:94)
	at org.h2.mvstore.MVStore.panic(MVStore.java:379)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:362)
	at org.h2.mvstore.MVStore$Builder.open(MVStore.java:2923)
	at org.h2.mvstore.db.MVTableEngine$Store.open(MVTableEngine.java:154)
	at org.h2.mvstore.db.MVTableEngine.init(MVTableEngine.java:99)
	at org.h2.engine.Database.getPageStore(Database.java:2468)
	at org.h2.engine.Database.open(Database.java:695)
	at org.h2.engine.Database.openDatabase(Database.java:273)
	at org.h2.engine.Database.<init>(Database.java:267)
	at org.h2.engine.Engine.openSession(Engine.java:64)
	at org.h2.engine.Engine.openSession(Engine.java:176)
	at org.h2.engine.Engine.createSessionAndValidate(Engine.java:154)
	at org.h2.engine.Engine.createSession(Engine.java:137)
	at org.h2.engine.Engine.createSession(Engine.java:27)
	at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:349)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:115)
	at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:99)
	at org.h2.Driver.connect(Driver.java:69)
	at java.sql.DriverManager.getConnection(DriverManager.java:664)
	at java.sql.DriverManager.getConnection(DriverManager.java:270)
	at clojure.java.jdbc$get_connection.invokeStatic(jdbc.clj:265)
	at clojure.java.jdbc$get_connection.invoke(jdbc.clj:193)
	at migratus.database$connect_STAR_$fn__17434.invoke(database.clj:117)
	at migratus.database$connect_STAR_.invokeStatic(database.clj:116)
	at migratus.database$connect_STAR_.invoke(database.clj:114)
	at migratus.database.Database.connect(database.clj:208)
	at migratus.core$run.invokeStatic(core.clj:24)
	at migratus.core$run.invoke(core.clj:21)
	at migratus.core$migrate.invokeStatic(core.clj:69)
	at migratus.core$migrate.invoke(core.clj:66)
	at luminus_migrations.core$migrate.invokeStatic(core.clj:73)
	at luminus_migrations.core$migrate.invoke(core.clj:52)
	at clotter.core$_main.invokeStatic(core.clj:59)
	at clotter.core$_main.doInvoke(core.clj:49)
	at clojure.lang.RestFn.invoke(RestFn.java:408)
	at clojure.lang.Var.invoke(Var.java:379)
	at user$eval17942.invokeStatic(form-init1138756175274235233.clj:1)
	at user$eval17942.invoke(form-init1138756175274235233.clj:1)
	at clojure.lang.Compiler.eval(Compiler.java:6927)
	at clojure.lang.Compiler.eval(Compiler.java:6917)
	at clojure.lang.Compiler.load(Compiler.java:7379)
	at clojure.lang.Compiler.loadFile(Compiler.java:7317)
	at clojure.main$load_script.invokeStatic(main.clj:275)
	at clojure.main$init_opt.invokeStatic(main.clj:277)
	at clojure.main$init_opt.invoke(main.clj:277)
	at clojure.main$initialize.invokeStatic(main.clj:308)
	at clojure.main$null_opt.invokeStatic(main.clj:342)
	at clojure.main$null_opt.invoke(main.clj:339)
	at clojure.main$main.invokeStatic(main.clj:421)
	at clojure.main$main.doInvoke(main.clj:384)
	at clojure.lang.RestFn.invoke(RestFn.java:421)
	at clojure.lang.Var.invoke(Var.java:383)
	at clojure.lang.AFn.applyToHelper(AFn.java:156)
	at clojure.lang.Var.applyTo(Var.java:700)
	at clojure.main.main(main.java:37)
Caused by: org.h2.jdbc.JdbcSQLException: 一般エラー: "java.lang.IllegalStateException: The file is locked: nio:/Users/shunsuke.tadokoro/git-project/clotter/clotter_dev.db.mv.db [1.4.193/7]"
General error: "java.lang.IllegalStateException: The file is locked: nio:/Users/shunsuke.tadokoro/git-project/clotter/clotter_dev.db.mv.db [1.4.193/7]" [50000-193]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:345)
	... 58 more
Caused by: java.lang.IllegalStateException: The file is locked: nio:/Users/shunsuke.tadokoro/git-project/clotter/clotter_dev.db.mv.db [1.4.193/7]
	at org.h2.mvstore.DataUtils.newIllegalStateException(DataUtils.java:765)
	at org.h2.mvstore.FileStore.open(FileStore.java:173)
	at org.h2.mvstore.MVStore.<init>(MVStore.java:348)
	... 53 more
2017-07-19 17:32:49 jdbc[3]: exception
org.h2.jdbc.JdbcSQLException: 不明なデータ型: "FK_TWEET_USER_IDX"
Unknown data type: "FK_TWEET_USER_IDX"; SQL statement:
CREATE TABLE IF NOT EXISTS `tweet` (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
`created_timestamp` TIMESTAMP NOT NULL DEFAULT current_timestamp COMMENT 'ツイートの時間',
`user_id` VARCHAR(20) NOT NULL,
`content` VARCHAR(560) NOT NULL COMMENT '4バイト * 140字 = 560バイト\n',
PRIMARY KEY (`id`),
INDEX `fk_TWEET_USER_idx` (`user_id` ASC),
UNIQUE INDEX `id_UNIQUE` (`id` ASC),
INDEX `created_datetime` (`created_timestamp` ASC),
CONSTRAINT `fk_TWEET_USER`
FOREIGN KEY (`user_id`)
REFERENCES `clotter`.`user` (`id`)
ON DELETE NO ACTION
ON UPDATE NO ACTION);
 [50004-193]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:345)
	at org.h2.message.DbException.get(DbException.java:179)
	at org.h2.message.DbException.get(DbException.java:155)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:4080)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:3938)
	at org.h2.command.Parser.parseCreateTable(Parser.java:5977)
	at org.h2.command.Parser.parseCreate(Parser.java:4238)
	at org.h2.command.Parser.parsePrepared(Parser.java:362)
	at org.h2.command.Parser.parse(Parser.java:317)
	at org.h2.command.Parser.parse(Parser.java:289)
	at org.h2.command.Parser.prepareCommand(Parser.java:254)
	at org.h2.engine.Session.prepareLocal(Session.java:561)
	at org.h2.engine.Session.prepareCommand(Session.java:502)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1203)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:73)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:287)
	at clojure.java.jdbc$prepare_statement.invokeStatic(jdbc.clj:495)
	at clojure.java.jdbc$prepare_statement.invoke(jdbc.clj:454)
	at clojure.java.jdbc$db_do_prepared.invokeStatic(jdbc.clj:813)
	at clojure.java.jdbc$db_do_prepared.invoke(jdbc.clj:795)
	at clojure.java.jdbc$db_do_prepared.invokeStatic(jdbc.clj:802)
	at clojure.java.jdbc$db_do_prepared.invoke(jdbc.clj:795)
	at migratus.migration.sql$execute_command.invokeStatic(sql.clj:25)
	at migratus.migration.sql$execute_command.invoke(sql.clj:22)
	at migratus.migration.sql$run_sql$fn__17187.invoke(sql.clj:36)
	at clojure.java.jdbc$db_transaction_STAR_.invokeStatic(jdbc.clj:637)
	at clojure.java.jdbc$db_transaction_STAR_.invoke(jdbc.clj:585)
	at clojure.java.jdbc$db_transaction_STAR_.invokeStatic(jdbc.clj:598)
	at clojure.java.jdbc$db_transaction_STAR_.invoke(jdbc.clj:585)
	at migratus.migration.sql$run_sql.invokeStatic(sql.clj:31)
	at migratus.migration.sql$run_sql.invoke(sql.clj:30)
	at migratus.migration.sql.SqlMigration.up(sql.clj:46)
	at migratus.database$migrate_up_STAR_$fn__17413.invoke(database.clj:64)
	at clojure.java.jdbc$db_transaction_STAR_.invokeStatic(jdbc.clj:613)
	at clojure.java.jdbc$db_transaction_STAR_.invoke(jdbc.clj:585)
	at clojure.java.jdbc$db_transaction_STAR_.invokeStatic(jdbc.clj:598)
	at clojure.java.jdbc$db_transaction_STAR_.invoke(jdbc.clj:585)
	at migratus.database$migrate_up_STAR_.invokeStatic(database.clj:61)
	at migratus.database$migrate_up_STAR_.invoke(database.clj:56)
	at migratus.database.Database.migrate_up(database.clj:204)
	at migratus.core$up_STAR_.invokeStatic(core.clj:47)
	at migratus.core$up_STAR_.invoke(core.clj:45)
	at migratus.core$migrate_up_STAR_.invokeStatic(core.clj:55)
	at migratus.core$migrate_up_STAR_.invoke(core.clj:49)
	at migratus.core$migrate_STAR_.invokeStatic(core.clj:64)
	at migratus.core$migrate_STAR_.invoke(core.clj:60)
	at clojure.core$partial$fn__4759.invoke(core.clj:2516)
	at migratus.core$run.invokeStatic(core.clj:25)
	at migratus.core$run.invoke(core.clj:21)
	at migratus.core$migrate.invokeStatic(core.clj:69)
	at migratus.core$migrate.invoke(core.clj:66)
	at luminus_migrations.core$migrate.invokeStatic(core.clj:73)
	at luminus_migrations.core$migrate.invoke(core.clj:52)
	at clotter.core$_main.invokeStatic(core.clj:59)
	at clotter.core$_main.doInvoke(core.clj:49)
	at clojure.lang.RestFn.invoke(RestFn.java:408)
	at clojure.lang.Var.invoke(Var.java:379)
	at user$eval17942.invokeStatic(form-init1513607794151600702.clj:1)
	at user$eval17942.invoke(form-init1513607794151600702.clj:1)
	at clojure.lang.Compiler.eval(Compiler.java:6927)
	at clojure.lang.Compiler.eval(Compiler.java:6917)
	at clojure.lang.Compiler.load(Compiler.java:7379)
	at clojure.lang.Compiler.loadFile(Compiler.java:7317)
	at clojure.main$load_script.invokeStatic(main.clj:275)
	at clojure.main$init_opt.invokeStatic(main.clj:277)
	at clojure.main$init_opt.invoke(main.clj:277)
	at clojure.main$initialize.invokeStatic(main.clj:308)
	at clojure.main$null_opt.invokeStatic(main.clj:342)
	at clojure.main$null_opt.invoke(main.clj:339)
	at clojure.main$main.invokeStatic(main.clj:421)
	at clojure.main$main.doInvoke(main.clj:384)
	at clojure.lang.RestFn.invoke(RestFn.java:421)
	at clojure.lang.Var.invoke(Var.java:383)
	at clojure.lang.AFn.applyToHelper(AFn.java:156)
	at clojure.lang.Var.applyTo(Var.java:700)
	at clojure.main.main(main.java:37)
2017-07-19 17:32:49 jdbc[3]: exception
org.h2.jdbc.JdbcSQLException: テーブル "TWEET" が見つかりません
Table "TWEET" not found; SQL statement:
DROP TABLE `tweet`;
 [42102-193]
